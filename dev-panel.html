<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>開發者面板</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    h1 { text-align:center; margin-bottom:20px; }
    .panel-section { background:#fff; padding:16px; border-radius:8px; margin-bottom:20px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    .panel-section h2 { margin-top:0; font-size:20px; margin-bottom:10px; }
    button { padding:10px 14px; border:none; background:#6200ea; color:white; border-radius:6px; cursor:pointer; }
    button:hover { background:#4b00b5; }
    .info-item { margin:5px 0; padding-left:6px; border-left:4px solid #6200ea; }
    #logoutBtn { background:#b00020; margin-top:10px; }
    #logoutBtn:hover { background:#7a0015; }
  </style>
</head>

<body>
  <h1>開發者控制面板</h1>

  <div id="panel" style="display:none;">
    <!-- 系統資訊 -->
    <div class="panel-section">
      <h2>系統資訊</h2>
      <div class="info-item">網站版本：1.0.0</div>
      <div class="info-item" id="firebase-status">Firebase：檢查中…</div>
      <div class="info-item">最後更新：2025-11-14</div>
    </div>

    <!-- GitHub Commit 假資訊 -->
    <div class="panel-section">
      <h2>GitHub 狀態</h2>
      <div class="info-item">最後 Commit：2025-11-13 22:11</div>
      <div class="info-item">分支：main</div>
    </div>

    <!-- Blogger 文章統計 -->
    <div class="panel-section">
      <h2>Blogger 文章統計</h2>
      <div class="info-item">目前文章數： <span id="blog-count">（請手動輸入）</span></div>
      <button onclick="setBlogCount()">更新文章數</button>
    </div>

    <!-- 更新紀錄 -->
    <div class="panel-section">
      <h2>更新紀錄</h2>
      <textarea id="update-log" style="width:100%;height:80px;"></textarea>
      <button onclick="saveUpdate()">儲存更新紀錄</button>
      <p style="margin-top:10px;font-size:14px;color:#555;">
        （手動紀錄文章新增或首頁推薦更新）
      </p>
    </div>

    <!-- 工具區 -->
    <div class="panel-section">
      <h2>工具區</h2>
      <button onclick="openColorTool()">開啟：顏色查詢器（color.html）</button>
    </div>

    <button id="logoutBtn" onclick="logout()">登出</button>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js"></script>
  <script src="firebase-config.js"></script>

  <script>
    const auth = firebase.auth();

    // 登入保護
    auth.onAuthStateChanged(user => {
      if(user){
        document.getElementById("panel").style.display = "block";
        detectFirebase();
      } else {
        alert("請先登入！");
        window.location.href = "/";
      }
    });

    function logout() {
      auth.signOut().then(()=>{ window.location.href="/"; });
    }

    // Firebase 載入偵測
    function detectFirebase() {
      if (window.firebase) {
        document.getElementById("firebase-status").innerText = "Firebase：已載入 ✔";
      } else {
        document.getElementById("firebase-status").innerText = "Firebase：未載入 ✘";
      }
    }

    // 開啟顏色查詢器
    function openColorTool() {
      window.location.href = "color.html";
    }

    // 儲存更新紀錄
    function saveUpdate() {
      const text = document.getElementById("update-log").value;
      localStorage.setItem("devUpdateLog", text);
      alert("已儲存！");
    }

    document.addEventListener("DOMContentLoaded", () => {
      const saved = localStorage.getItem("devUpdateLog");
      if(saved){ document.getElementById("update-log").value = saved; }

      const savedCount = localStorage.getItem("blogCount");
      if(savedCount){ document.getElementById("blog-count").innerText = savedCount; }
    });

    // Blogger 文章數
    function setBlogCount() {
      const num = prompt("請輸入目前文章數：");
      if(num !== null){
        document.getElementById("blog-count").innerText = num;
        localStorage.setItem("blogCount", num);
      }
    }
  </script>
</body>
</html>
