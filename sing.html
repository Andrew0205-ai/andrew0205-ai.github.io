<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ–°åŠ å¡å‹‡æ°£èƒ½é‡å°éŠæˆ²</title>
  <style>
    body {
      font-family: "Noto Sans TC", sans-serif;
      background: linear-gradient(135deg, #6d9eeb, #f1c232);
      height: 100vh;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: #fff;
      text-align: center;
      padding: 20px;
    }

    h1 {
      font-size: 32px;
      margin-bottom: 10px;
      text-shadow: 2px 2px 6px rgba(0,0,0,0.3);
    }

    #energy {
      font-size: 48px;
      margin: 20px 0;
      font-weight: bold;
    }

    button {
      padding: 15px 30px;
      border: none;
      background: #fff;
      color: #333;
      border-radius: 12px;
      font-size: 20px;
      cursor: pointer;
      transition: 0.2s;
      margin-top: 10px;
    }

    button:hover {
      transform: scale(1.08);
    }

    #msg, #dateMsg, #countdown {
      margin-top: 25px;
      font-size: 22px;
      min-height: 40px;
      max-width: 90%;
    }
  </style>
</head>
<body>
  <h1>ğŸŒŸ æ–°åŠ å¡å‹‡æ°£èƒ½é‡å°éŠæˆ² ğŸŒŸ</h1>

  <div id="countdown"></div>
  <div id="dateMsg"></div>

  <div id="energy">0%</div>

  <button onclick="addEnergy()">å¢åŠ å‹‡æ°£èƒ½é‡ï¼</button>

  <button id="checkinBtn" onclick="dailyCheckIn()">æ¯æ—¥ç°½åˆ° +5%</button>

  <div id="msg"></div>

  <script>
    // --------------------
    // â‘  å‹‡æ°£èƒ½é‡åŠŸèƒ½
    // --------------------
    let energy = 0;

    const messages = [
      "åŠ æ²¹ï¼è€ƒè©¦æ²’æœ‰ä½ å²å®³ï¼",
      "æ˜Ÿå®ä»Šå¤©ä¹Ÿå¾ˆåŠªåŠ›äº†ï¼",
      "ä½ é›¢æ–°åŠ å¡æ›´é è¿‘ä¸€æ­¥å•¦ âœ¨",
      "ç¹¼çºŒä¿æŒï¼Œä½ ä¸€å®šå¯ä»¥å®Œæˆæ‰€æœ‰æŒ‘æˆ°ï¼",
      "å¤ªæ£’äº†ï¼ä½ æ­£åœ¨å¾€1æœˆ29æ—¥å¤§æ­¥å‰é€²ï¼",
      "æ¯ä¸€æ¬¡åŠªåŠ›éƒ½æœƒè®“æœªä¾†æ›´å®¹æ˜“ã€‚"
    ];

    function addEnergy() {
      if (energy < 100) {
        energy += 5;
        updateEnergy();
      }
    }

    function updateEnergy() {
      if (energy > 100) energy = 100;

      document.getElementById("energy").textContent = energy + "%";

      if (energy < 100) {
        const msg = messages[Math.floor(Math.random() * messages.length)];
        document.getElementById("msg").textContent = msg;
      } else {
        document.getElementById("msg").textContent = "ğŸ‰ å‹‡æ°£å·²æ»¿ï¼æ–°åŠ å¡åœ¨ç­‰ä½ ï¼ğŸ‰";
      }
    }


    // --------------------
    // â‘¡ è¾›è‹¦æ—¥å­é€²åº¦è¨ˆç®—
    // --------------------
    function calculateDateProgress() {
      const start = new Date("2025-11-01");
      const end = new Date("2026-01-29");
      const now = new Date();

      const total = end - start;
      const passed = now - start;

      let percent = (passed / total) * 100;

      if (percent < 0) percent = 0;
      if (percent > 100) percent = 100;

      const passedPercent = percent.toFixed(1);
      const remainingPercent = (100 - percent).toFixed(1);

      document.getElementById("dateMsg").textContent =
        `ä½ å¥½å²å®³ï¼Œå·²ç¶“éäº† ${passedPercent}% çš„è¾›è‹¦æ—¥å­ï¼Œé‚„æœ‰ ${remainingPercent}% å°±èƒ½ä¾†åˆ°æœŸå¾…å·²ä¹…çš„æ–°åŠ å¡äº†ï¼`;
    }


    // --------------------
    // â‘¢ å€’æ•¸å¤©æ•¸
    // --------------------
    function countdown() {
      const today = new Date();
      const target = new Date("2026-01-29");

      const diff = target - today;
      let days = Math.ceil(diff / (1000 * 60 * 60 * 24));

      if (days < 0) days = 0;

      document.getElementById("countdown").textContent =
        `ğŸ“… è·é›¢æ–°åŠ å¡ä¹‹æ—…é‚„æœ‰ ${days} å¤©ï¼`;
    }


    // --------------------
    // â‘£ æ¯æ—¥ç°½åˆ°åŠŸèƒ½
    // --------------------
    function dailyCheckIn() {
      const today = new Date().toDateString();
      const lastCheckIn = localStorage.getItem("checkinDate");

      if (lastCheckIn === today) {
        document.getElementById("msg").textContent = "ä»Šå¤©å·²ç¶“ç°½åˆ°éå›‰ï¼æ˜å¤©å†ä¾†ï½";
        return;
      }

      localStorage.setItem("checkinDate", today);
      energy += 5;
      updateEnergy();
      document.getElementById("msg").textContent = "ç°½åˆ°æˆåŠŸï¼ğŸ’ª å‹‡æ°£ä¸Šå‡ï¼";
    }


    // --------------------
    // â‘¤ é é¢åˆå§‹åŒ–
    // --------------------
    calculateDateProgress();
    countdown();
  </script>
</body>
</html>